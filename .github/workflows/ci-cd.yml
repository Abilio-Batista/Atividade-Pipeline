name: CI/CD Pipeline

on:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout código
        uses: actions/checkout@v4

      - name: Build simulado
        run: |
          echo "Construindo projeto"
          ls -la

  sast-segremp:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Checkout código
        uses: actions/checkout@v4

      - name: SAST simulado
        run: |
          echo "Rodando análise de segurança estática (SAST)"
          echo "Nenhuma vulnerabilidade crítica encontrada!"

  test:
    needs: sast-segremp
    runs-on: ubuntu-latest
    steps:
      - name: Teste simulado
        run: |
          echo "Rodando testes"
          echo "Tudo certo!"

  dast-scan:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - name: DAST simulado
        run: |
          echo "Rodando análise DAST"
          echo "Nenhuma vulnerabilidade encontrada!"

  deploy:
    needs: dast-scan
    runs-on: ubuntu-latest
    steps:
      - name: Deploy simulado
        run: |
          echo "Fazendo deploy"
          echo "Deploy completo!"
